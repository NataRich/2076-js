{"version":3,"sources":["js/varibale.js","js/calFunction.js","js/effect.js","js/panel.js","js/control.js","js/event.js","js/lifecycle.js","main.js"],"names":["defaulPopulation","farmers","criminals","prisoners","scientists","soldiers","defaultFoodGain","farmer","defaultFoodCost","criminal","prisoner","scientist","soldier","defaultOther","food","day","tf","policyCount","researchCount","population","foodGain","foodCost","other","resetAll","resetPolicyAndResearchCount","getFarmersFoodGain","getFarmersFoodCost","getCriminalsFoodCost","getPrisonersFoodCost","getScientistsFoodCost","getSoldiersFoodCost","waterResearch","possibility1","successrate","Math","floor","random","possibility3","length","landResearch","possibility2","cropResearch","canResearch","canEnforcePolicy","eduPromotion","diff","scientistRetirement","longHourFarming","militaryRecruitment","militaryRetirement","catchIfShould","specialEventChangeTechFactor","amount","specialEventChangeCropProduction","isGameOver","naturalUpdateVariables","addEventCardTransition","e","document","getElementsByClassName","classList","contains","add","removeEventCardTransition","remove","addInfoCardTransition","removeInfoCardTransition","addPanelTriggerButtonTransition","removePanelTriggerButtonTransition","addPanelTransition","removePanelTransition","addGameOverTransition","removeGameOverTransition","addControlButtonTransition","type","es","i","removeControlButtonTransition","registerClickListenerForPanelTriggerButton","btn","addEventListener","updatePanelData","innerText","parseString","str","number","Number","parseInt","isNaN","substring","replace","representAsString","num","isNegativeNumber","updatePanelDataColor","data","style","color","var1","var3","var5","var7","var9","cal","OPTIONS","policies","count","options","research","BUTTON_INFO","name","desc","getOption","setButtons","option","buttons","innerHTML","node","createElement","className","includes","appendChild","getActiveOption","opts","getControlButtonInfo","fillControlButtonInfo","info","registerClickListenerForOptions","currentTarget","registerMouseEnterListenerForControlButtons","registerClickListenerForControlButtons","updateControlButtonStyle","cbtns","ele","console","log","SUBJECTS","ACTIONS","effect","TARGETS","generateEvent","subjectIndex","actionIndex","targetIndex","subject","action","target","fillEventText","randomGenerateEventCard","res","registerClickListenerForEventButton","strGroup","split","parseFloat","registerClickListenerForNextDayButton","registerClickListenerForGameRestart","setup"],"mappings":";AAoFC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,EAAA,QAAA,4BAAA,EAAA,QAAA,MAAA,QAAA,SAAA,QAAA,SAAA,QAAA,gBAAA,EAlFD,IAAMA,EAAmB,CACrBC,QAAU,GACVC,UAAY,GACZC,UAAY,EACZC,WAAa,EACbC,SAAW,GAGTC,EAAkB,CACpBC,OAAQ,IAGNC,EAAkB,CACpBD,OAAQ,GACRE,SAAU,GACVC,SAAU,GACVC,UAAW,GACXC,QAAS,IAGPC,EAAe,CACjBC,KAAM,IACNC,IAAK,EACLC,GAAI,EACJC,YAAa,EACbC,cAAe,GAIRC,EAAa,CACpBlB,QAAU,GACVC,UAAY,GACZC,UAAY,EACZC,WAAa,EACbC,SAAW,GAgDd,QAAA,WAAA,EA7CM,IAAIe,EAAW,CAClBb,OAAQ,IA4CX,QAAA,SAAA,EAzCM,IAAIc,EAAW,CAClBd,OAAQ,GACRE,SAAU,GACVC,SAAU,GACVC,UAAW,GACXC,QAAS,IAoCZ,QAAA,SAAA,EAjCM,IAAIU,EAAQ,CACfR,KAAM,IACNC,IAAK,EACLC,GAAI,EACJC,YAAa,EACbC,cAAe,GAGZ,SAASK,IACZJ,EAAWjB,UAAYF,EAAiBE,UACxCiB,EAAWlB,QAAUD,EAAiBC,QACtCkB,EAAWhB,UAAYH,EAAiBG,UACxCgB,EAAWf,WAAaJ,EAAiBI,WACzCe,EAAWd,SAAWL,EAAiBK,SAEvCe,EAASb,OAASD,EAAgBC,OAElCc,EAASnB,UAAYM,EAAgBN,UACrCmB,EAASpB,QAAUO,EAAgBP,QACnCoB,EAASlB,UAAYK,EAAgBL,UACrCkB,EAASjB,WAAaI,EAAgBJ,WACtCiB,EAAShB,SAAWG,EAAgBH,SAEpCiB,EAAML,YAAcJ,EAAaI,YACjCK,EAAMJ,cAAgBL,EAAaK,cACnCI,EAAMP,IAAMF,EAAaE,IACzBO,EAAMR,KAAOD,EAAaC,KAC1BQ,EAAMN,GAAKH,EAAaG,GAGrB,SAASQ,IACZF,EAAML,YAAcJ,EAAaI,YACjCK,EAAMJ,cAAgBL,EAAaK,cACtC,QAAA,MAAA;;ACmCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,mBAAA,EAAA,QAAA,mBAAA,EAAA,QAAA,qBAAA,EAAA,QAAA,qBAAA,EAAA,QAAA,sBAAA,EAAA,QAAA,oBAAA,EAAA,QAAA,cAAA,EAAA,QAAA,aAAA,EAAA,QAAA,aAAA,EAAA,QAAA,YAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,aAAA,EAAA,QAAA,oBAAA,EAAA,QAAA,gBAAA,EAAA,QAAA,oBAAA,EAAA,QAAA,mBAAA,EAAA,QAAA,cAAA,EAAA,QAAA,6BAAA,EAAA,QAAA,iCAAA,EAAA,QAAA,WAAA,EAAA,QAAA,uBAAA,EAvHD,IAAA,EAAA,QAAA,cAGO,SAASO,IACLL,OAAAA,EAASb,SAAAA,OAASe,EAAMN,MAAAA,GAAKG,EAAWlB,WAAAA,QAI5C,SAASyB,IACL,OAAC,EAAIP,EAAWlB,WAAAA,SAAWoB,EAASd,SAAAA,OAAS,GAAKe,EAAMP,MAAAA,IAAM,IAIlE,SAASY,IACL,OAAC,EAAIR,EAAWjB,WAAAA,WAAamB,EAASZ,SAAAA,SAAW,GAAKa,EAAMP,MAAAA,IAAM,IAItE,SAASa,IACL,OAAC,EAAIT,EAAWhB,WAAAA,WAAakB,EAASX,SAAAA,SAAW,GAAKY,EAAMP,MAAAA,IAAM,IAItE,SAASc,IACL,OAAC,EAAIV,EAAWf,WAAAA,YAAciB,EAASX,SAAAA,SAAW,GAAKY,EAAMP,MAAAA,IAAM,IAIvE,SAASe,IACL,OAAC,EAAIX,EAAWd,WAAAA,UAAYgB,EAAST,SAAAA,QAAU,GAAKU,EAAMP,MAAAA,IAAM,IAIpE,SAASgB,IACRC,IACAC,EAAkF,IAAnE,GAAMd,EAAWf,WAAAA,WAAa,KAASe,EAAWf,WAAAA,WAAY,GAC3EY,EAAAA,MAAAA,IAAOiB,EAAc,EAFR,CAAC,GAAK,IAAM,GAAK,KAESC,KAAKC,MAAsB,GAAhBD,KAAKE,UAAiBC,aAAaC,QAAU,EAC/FpB,EAAAA,MAAAA,eAAiB,EAIpB,SAASqB,IACRC,IAAAA,EAAe,CAAC,IAAM,GAAK,IAC3BP,EAAgF,KAAjE,GAAMd,EAAWf,WAAAA,WAAa,KAAOe,EAAWf,WAAAA,WAAY,GACzEY,EAAAA,MAAAA,IAAOiB,EAAc,EAAKO,EAAaN,KAAKC,MAAsB,GAAhBD,KAAKE,UAAiBI,EAAaF,QAAU,EAC/FpB,EAAAA,MAAAA,eAAiB,EAIpB,SAASuB,IACRJ,IAAAA,EAAe,CAAC,GAAK,KACrBJ,EAAkF,IAAnE,GAAMd,EAAWf,WAAAA,WAAa,KAASe,EAAWf,WAAAA,WAAY,GAC3EY,EAAAA,MAAAA,IAAOiB,EAAc,EAAKI,EAAaH,KAAKC,MAAsB,GAAhBD,KAAKE,UAAiBC,EAAaC,QAAU,EAC/FpB,EAAAA,MAAAA,eAAiB,EAGpB,SAASwB,IACLpB,OAAuB,GAAvBA,EAAMJ,MAAAA,cAGV,SAASyB,IACLrB,OAAqB,GAArBA,EAAML,MAAAA,YAGV,SAAS2B,IACRC,IAAAA,EAAOX,KAAKC,MAA2B,GAArBhB,EAAWlB,WAAAA,SACtBA,EAAAA,WAAAA,SAAW4C,EACXzC,EAAAA,WAAAA,YAAcyC,EACnB5B,EAAAA,MAAAA,aAAe,EAGlB,SAAS6B,IACRD,IAAAA,EAAOX,KAAKC,MAA8B,GAAxBhB,EAAWf,WAAAA,YACtBA,EAAAA,WAAAA,YAAcyC,EACd5C,EAAAA,WAAAA,SAAW4C,EAChB5B,EAAAA,MAAAA,aAAe,EAGlB,SAAS8B,IACHxC,EAAAA,SAAAA,QAAU,EACbU,EAAAA,MAAAA,aAAe,EAGlB,SAAS+B,IACRH,IAAAA,EAAOX,KAAKC,MAA2B,GAArBhB,EAAWlB,WAAAA,SACtBA,EAAAA,WAAAA,SAAW4C,EACXxC,EAAAA,WAAAA,UAAYwC,EACjB5B,EAAAA,MAAAA,aAAe,EAGlB,SAASgC,IACRJ,IAAAA,EAAOX,KAAKC,MAA4B,GAAtBhB,EAAWd,WAAAA,UACtBA,EAAAA,WAAAA,UAAYwC,EACZ5C,EAAAA,WAAAA,SAAW4C,EAChB5B,EAAAA,MAAAA,aAAe,EAGlB,SAASiC,IACR5B,EAAMP,MAAAA,IAAM,GAAK,IACNb,EAAAA,WAAAA,WAAa,EACbC,EAAAA,WAAAA,WAAa,GAIzB,SAASgD,EAA6BC,GACnCpC,EAAAA,MAAAA,IAAMoC,EAGT,SAASC,EAAiCD,GACpC7C,EAAAA,SAAAA,QAAU6C,EAGhB,SAASE,IACLhC,OAAAA,EAAMR,MAAAA,MAAQ,EAGlB,SAASyC,IACNzC,EAAAA,MAAAA,KAAOQ,EAAMR,MAAAA,KAAOW,IAAuBC,IAAuBC,IAAyBC,IAAyBE,IAAwBD,IAC5Id,EAAAA,MAAAA;;AC5CT,aA1EM,SAASyC,IACRC,IAAAA,EAAIC,SAASC,uBAAuB,cAAc,GACjDF,EAAEG,UAAUC,SAAS,oBACtBJ,EAAEG,UAAUE,IAAI,mBAGjB,SAASC,IACRN,IAAAA,EAAIC,SAASC,uBAAuB,cAAc,GAClDF,EAAEG,UAAUC,SAAS,oBACrBJ,EAAEG,UAAUI,OAAO,mBAGpB,SAASC,IACRR,IAAAA,EAAIC,SAASC,uBAAuB,aAAa,GAChDF,EAAEG,UAAUC,SAAS,mBACtBJ,EAAEG,UAAUE,IAAI,kBAGjB,SAASI,IACRT,IAAAA,EAAIC,SAASC,uBAAuB,aAAa,GACjDF,EAAEG,UAAUC,SAAS,mBACrBJ,EAAEG,UAAUI,OAAO,kBAGpB,SAASG,IACRV,IAAAA,EAAIC,SAASC,uBAAuB,qBAAqB,GACxDF,EAAEG,UAAUC,SAAS,6BACtBJ,EAAEG,UAAUE,IAAI,4BAGjB,SAASM,IACRX,IAAAA,EAAIC,SAASC,uBAAuB,qBAAqB,GACzDF,EAAEG,UAAUC,SAAS,6BACrBJ,EAAEG,UAAUI,OAAO,4BAGpB,SAASK,IACRZ,IAAAA,EAAIC,SAASC,uBAAuB,SAAS,GAC5CF,EAAEG,UAAUC,SAAS,eACtBJ,EAAEG,UAAUE,IAAI,cAGjB,SAASQ,IACRb,IAAAA,EAAIC,SAASC,uBAAuB,SAAS,GAC7CF,EAAEG,UAAUC,SAAS,eACrBJ,EAAEG,UAAUI,OAAO,cAGpB,SAASO,IACRd,IAAAA,EAAIC,SAASC,uBAAuB,aAAa,GAChDF,EAAEG,UAAUC,SAAS,mBACtBJ,EAAEG,UAAUE,IAAI,kBAGjB,SAASU,IACRf,IAAAA,EAAIC,SAASC,uBAAuB,aAAa,GACjDF,EAAEG,UAAUC,SAAS,mBACrBJ,EAAEG,UAAUI,OAAO,kBAGpB,SAASS,EAA2BC,GAElC,IADDC,IAAAA,EAAKjB,SAASC,uBAAuBe,GAChCE,EAAI,EAAGA,EAAID,EAAGrC,OAAQsC,IACtBD,EAAGC,GAAGhB,UAAUC,SAAS,yBAC1Bc,EAAGC,GAAGhB,UAAUE,IAAI,wBAIzB,SAASe,EAA8BH,GAErC,IADDC,IAAAA,EAAKjB,SAASC,uBAAuBe,GAChCE,EAAI,EAAGA,EAAID,EAAGrC,OAAQsC,IACvBD,EAAGC,GAAGhB,UAAUC,SAAS,yBACzBc,EAAGC,GAAGhB,UAAUI,OAAO,wBAElC,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,uBAAA,EAAA,QAAA,0BAAA,EAAA,QAAA,sBAAA,EAAA,QAAA,yBAAA,EAAA,QAAA,gCAAA,EAAA,QAAA,mCAAA,EAAA,QAAA,mBAAA,EAAA,QAAA,sBAAA,EAAA,QAAA,sBAAA,EAAA,QAAA,yBAAA,EAAA,QAAA,2BAAA,EAAA,QAAA,8BAAA;;AC1ED,aAuGC,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,2CAAA,EAAA,QAAA,gBAAA,EArGD,IAAA,EAAA,QAAA,YACA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,kBAmGC,SAAA,IAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,GAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,IAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EAjGM,SAASc,IACRC,IAAAA,EAAMrB,SAASC,uBAAuB,qBAAqB,GAC/DoB,EAAIC,iBAAiB,QAAS,WAC1BC,IACsB,eAAlBF,EAAIG,WACJH,EAAIG,UAAY,SAChB,EAAA,EAAA,oCACA,EAAA,EAAA,wBAEAH,EAAIG,UAAY,cAChB,EAAA,EAAA,uCACA,EAAA,EAAA,4BAEL,GAGP,SAASC,EAAYC,GACbC,IAAAA,EAASC,OAAOC,SAASH,EAAK,IAI3BI,OAHHA,MAAMH,KACNA,EAASC,OAAOC,SAASH,EAAIK,UAAU,EAAGL,EAAI9C,OAAS,GAAGoD,QAAQ,IAAK,IAAK,KAEzEF,MAAMH,GAAU,EAAIA,EAG/B,SAASM,EAAkBC,GAChBA,OAAAA,GAAO,EAAI,IAAMA,EAAMA,EAGlC,SAASC,EAAiBT,GACfD,OAAAA,EAAYC,GAAO,EAG9B,SAASU,IAEA,IADDC,IAAAA,EAAOrC,SAASC,uBAAuB,SAClCiB,EAAI,EAAGA,EAAImB,EAAKzD,OAAQsC,IAC7BmB,EAAKnB,GAAGoB,MAAMC,MAAQJ,EAAiBE,EAAKnB,GAAGM,WAAa,MAAQ,QAIrE,SAASD,IACRiB,IAAAA,EAAOxC,SAASC,uBAAuB,mBAAmB,GAC9DuC,EAAKhB,UAAY/D,EAAWlB,WAAAA,QACjByD,SAASC,uBAAuB,0BAA0B,GAChEuB,UAAY,IAAMS,EAAkBxE,EAAWlB,WAAAA,QAAUkF,EAAYe,EAAKhB,YAAc,IAEzFiB,IAAAA,EAAOzC,SAASC,uBAAuB,qBAAqB,GAChEwC,EAAKjB,UAAY/D,EAAWjB,WAAAA,UACjBwD,SAASC,uBAAuB,4BAA4B,GAClEuB,UAAY,IAAMS,EAAkBxE,EAAWjB,WAAAA,UAAYiF,EAAYgB,EAAKjB,YAAc,IAE3FkB,IAAAA,EAAO1C,SAASC,uBAAuB,qBAAqB,GAChEyC,EAAKlB,UAAY/D,EAAWhB,WAAAA,UACjBuD,SAASC,uBAAuB,4BAA4B,GAClEuB,UAAY,IAAMS,EAAkBxE,EAAWhB,WAAAA,UAAYgF,EAAYiB,EAAKlB,YAAc,IAE3FmB,IAAAA,EAAO3C,SAASC,uBAAuB,oBAAoB,GAC/D0C,EAAKnB,UAAY/D,EAAWd,WAAAA,SACjBqD,SAASC,uBAAuB,2BAA2B,GACjEuB,UAAY,IAAMS,EAAkBxE,EAAWd,WAAAA,SAAW8E,EAAYkB,EAAKnB,YAAc,IAE1FoB,IAAAA,EAAO5C,SAASC,uBAAuB,sBAAsB,GACjE2C,EAAKpB,UAAY/D,EAAWf,WAAAA,WAChBsD,SAASC,uBAAuB,6BAA6B,GACnEuB,UAAY,IAAMS,EAAkBxE,EAAWf,WAAAA,WAAa+E,EAAYmB,EAAKpB,YAAc,IAIpFxB,SAASC,uBAAuB,aAAa,GACnDuB,UAAY5D,EAAMR,MAAAA,KAEZ4C,SAASC,uBAAuB,WAAW,GACjDuB,UAAY5D,EAAMN,MAAAA,GAEb0C,SAASC,uBAAuB,qBAAqB,GAC3DuB,UAAY5D,EAAMP,MAAAA,IAIX2C,SAASC,uBAAuB,yBAAyB,GAC/DuB,UAAY,IAAMS,EAAkBY,EAAI9E,sBAAwB,IAE3DiC,SAASC,uBAAuB,yBAAyB,GAC/DuB,UAAY,IAAMS,EAAkBY,EAAI7E,sBAAwB,IAE1DgC,SAASC,uBAAuB,6BAA6B,GACnEuB,UAAY,IAAMS,EAAkBY,EAAI5E,wBAA0B,IAE5D+B,SAASC,uBAAuB,6BAA6B,GACnEuB,UAAY,IAAMS,EAAkBY,EAAI3E,wBAA0B,IAE5D8B,SAASC,uBAAuB,4BAA4B,GAClEuB,UAAY,IAAMS,EAAkBY,EAAIzE,uBAAyB,IAE3D4B,SAASC,uBAAuB,8BAA8B,GACpEuB,UAAY,IAAMS,EAAkBY,EAAI1E,yBAA2B,IAEzEiE;;ACyFH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EAAA,QAAA,gBAAA,EAAA,QAAA,qBAAA,EAAA,QAAA,sBAAA,EAAA,QAAA,gCAAA,EAAA,QAAA,4CAAA,EAAA,QAAA,yBAAA,EAAA,QAAA,uCAAA,EA/LD,IAAA,EAAA,QAAA,iBACA,EAAA,QAAA,YACA,EAAA,QAAA,WAEMU,EAAU,CACZC,SAAU,CACNC,MAAO,EACPC,QAAS,CAAC,sBAAuB,oBAAqB,uBAAwB,sBAAuB,yBAEzGC,SAAU,CACNF,MAAO,EACPC,QAAS,CAAC,QAAS,OAAQ,WAI7BE,EAAc,CAEhB,CACIC,KAAM,sBACNC,KAAM,sEAEV,CACID,KAAM,oBACNC,KAAM,mEAEV,CACID,KAAM,uBACNC,KAAM,yCAEV,CACID,KAAM,sBACNC,KAAM,+DAEV,CACID,KAAM,uBACNC,KAAM,iEAIV,CACID,KAAM,QACNC,KAAM,0DAEV,CACID,KAAM,OACNC,KAAM,yDAEV,CACID,KAAM,QACNC,KAAM,8DAId,SAASC,EAAU5B,GACRA,MAAQ,aAARA,EAAqBoB,EAAQC,SAAWD,EAAQI,SAIpD,SAASK,EAAWC,GACnBC,IAAAA,EAAUzD,SAASC,uBAAuB,WAAW,GACzDwD,EAAQC,UAAY,GACf,IAAA,IAAIxC,EAAI,EAAGA,EAAIsC,EAAOR,MAAO9B,IAAK,CAC/ByC,IAAAA,EAAO3D,SAAS4D,cAAc,OAClCD,EAAKnC,UAAYgC,EAAOP,QAAQ/B,GAChCyC,EAAKE,UAAY,SAAWf,EAAQC,SAASE,QAAQa,SAASN,EAAOP,QAAQ/B,IAAM,WAAa,YAChGuC,EAAQM,YAAYJ,IAIrB,SAASK,IAEP,IADDC,IAAAA,EAAOjE,SAASC,uBAAuB,OAClCiB,EAAI,EAAGA,EAAI+C,EAAKrF,OAAQsC,IACzB+C,GAAAA,EAAK/C,GAAGhB,UAAUC,SAAS,UAC3B,OAAOmD,EAAUW,EAAK/C,GAAGM,WAE1B,OAAA,KAGJ,SAAS0C,EAAqB7C,GAC5B,IAAA,IAAIH,EAAI,EAAGA,EAAIiC,EAAYvE,OAAQsC,IAChCG,GAAAA,EAAIG,YAAc2B,EAAYjC,GAAGkC,KACjC,OAAOD,EAAYjC,GAEpB,OAAA,KAGJ,SAASiD,EAAsBC,GAClCpE,SAASC,uBAAuB,aAAa,GAAGuB,UAAY4C,EAAKhB,KACjEpD,SAASC,uBAAuB,aAAa,GAAGuB,UAAY4C,EAAKf,KAG9D,SAASgB,IAEP,IADDJ,IAAAA,EAAOjE,SAASC,uBAAuB,OAClCiB,EAAI,EAAGA,EAAI+C,EAAKrF,OAAQsC,IAC7B+C,EAAK/C,GAAGI,iBAAiB,QAAS,SAAAvB,GAEzB,IADDkE,IAAAA,EAAOjE,SAASC,uBAAuB,OAClCiB,EAAI,EAAGA,EAAI+C,EAAKrF,OAAQsC,IAC7B+C,EAAK/C,GAAG2C,UAAY,MAExB9D,EAAEuE,cAAcT,UAAY,cAG5BN,EAAWS,KAGXO,IACAC,IAEAC,MACD,GAIJ,SAASF,IAEP,IADDG,IAAAA,EAAQ1E,SAASC,uBAAuB,QACnCiB,EAAI,EAAGA,EAAIwD,EAAM9F,OAAQsC,IAC9BwD,EAAMxD,GAAGI,iBAAiB,aAAc,SAAAvB,GACpCoE,EAAsBD,EAAqBnE,EAAEuE,iBAC7C,EAAA,EAAA,2BACD,GAEHI,EAAMxD,GAAGI,iBAAiB,aAAc,SAAAvB,IACpC,EAAA,EAAA,8BACD,GAIJ,SAAS0E,KACP,EAAL,EAAA,gBAGkC,EAAA,EAAA,+BAAA,aAFH,EAAA,EAAA,4BAAA,aAK1B,EAAL,EAAA,qBAGkC,EAAA,EAAA,+BAAA,aAFH,EAAA,EAAA,4BAAA,YAM5B,SAASD,IAEP,IADDE,IAAAA,EAAQ1E,SAASC,uBAAuB,QACnCiB,EAAI,EAAGA,EAAIwD,EAAM9F,OAAQsC,IAC9BwD,EAAMxD,GAAGI,iBAAiB,QAAS,SAAAvB,GAC3B4E,IAAAA,EAAM5E,EAAEuE,cAER,IAAA,EAAiBK,EAAAA,gBAAAA,EAAIzE,UAAUC,SAAS,YAChCwE,OAAAA,EAAInD,WACH,IAAA,SACD,EAAA,EAAA,iBACA,MACC,IAAA,QACD,EAAA,EAAA,gBACA,MACC,IAAA,SACD,EAAA,EAAA,gBACA,MACJ,QACIoD,QAAQC,IAAI,qBAKpB,IAAA,EAAsBF,EAAAA,qBAAAA,EAAIzE,UAAUC,SAAS,YACrCwE,OAAAA,EAAInD,WACH,IAAA,uBACD,EAAA,EAAA,gBACA,MACC,IAAA,qBACD,EAAA,EAAA,mBACA,MACC,IAAA,wBACD,EAAA,EAAA,uBACA,MACC,IAAA,uBACD,EAAA,EAAA,sBACA,MACC,IAAA,wBACD,EAAA,EAAA,uBACA,MACJ,QACIoD,QAAQC,IAAI,oBAKxB,EAAA,EAAA,mBACAJ,MACD;;AC9GV,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,wBAAA,EAAA,QAAA,oCAAA,EA/ED,IAAA,EAAA,QAAA,iBACA,EAAA,QAAA,YACA,EAAA,QAAA,WAEMK,EAAW,CAAC,eAAgB,oBAAqB,gBAEjDC,EAAU,CACZ,CACI/D,KAAM,YACNqC,KAAM,CACF,yEACA,kIACA,2EAEJ2B,OAAQ,CACJ,CAAC,EAAG,IACJ,CAAC,EAAG,IACJ,CAAC,EAAG,MAGZ,CACIhE,KAAM,YACNqC,KAAM,CACF,oHACA,yGACA,8EAEJ2B,OAAQ,CACJ,EAAE,GAAI,IACN,EAAE,GAAI,IACN,EAAE,GAAI,OAKZC,EAAU,CAAC,kBAAmB,oBAEpC,SAASC,IACDC,IAAAA,EAAe3G,KAAKC,MAAuB,GAAhBD,KAAKE,SAAiBoG,EAASlG,QAC1DwG,EAAc5G,KAAKC,MAAuB,GAAhBD,KAAKE,SAAiBqG,EAAQnG,QACxDyG,EAAc7G,KAAKC,MAAuB,GAAhBD,KAAKE,SAAiBuG,EAAQrG,QAErD,MAAA,CACH0G,QAASR,EAASK,GAClBI,OAAQR,EAAQK,GAAapE,KAC7BqC,KAAM0B,EAAQK,GAAa/B,KAAK8B,GAChCH,OAAQD,EAAQK,GAAaJ,OAAOG,GAAcE,GAClDG,OAAQP,EAAQI,IAIxB,SAASI,EAAcjC,GACnBxD,SAASC,uBAAuB,WAAW,GAAGuB,UAAYgC,EAAO8B,QACjEtF,SAASC,uBAAuB,QAAQ,GAAGuB,UAAYgC,EAAOH,KAC9DrD,SAASC,uBAAuB,UAAU,GAAGuB,WAAagC,EAAOgC,OAAS,IAAMhC,EAAO+B,OAAS,OAAS/B,EAAOwB,OAAS,KAAKhD,QAAQ,IAAK,IAGxI,SAAS0D,IACRC,IAAAA,EAAMnH,KAAKC,MAAsB,GAAhBD,KAAKE,UACd,IAARiH,GAAqB,IAARA,IACbF,EAAcP,MACd,EAAA,EAAA,2BAID,SAASU,IACD5F,SAASC,uBAAuB,aAAa,GACnDqB,iBAAiB,QAAS,WACvBuE,IAAAA,EAAW7F,SAASC,uBAAuB,UAAU,GAAGuB,UAAUsE,MAAM,KACxE3G,EAAOyC,OAAOmE,WAAWF,EAASA,EAASjH,OAAS,KACxDO,EAAyC,cAAlC0G,EAASA,EAASjH,OAAS,GAAqBO,GAAQA,GACnD,GAAKA,EAAO,GAAOA,EAAO,GAAKA,GAAQ,GAClBA,EAAAA,EAAAA,8BAAAA,IAEIA,EAAAA,EAAAA,kCAAAA,IAErC,EAAA,EAAA,8BACA,EAAA,EAAA,qBACD;;AC9EP,aAmCC,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,sCAAA,EAAA,QAAA,oCAAA,EAjCD,IAAA,EAAA,QAAA,cACA,EAAA,EAAA,QAAA,kBACA,EAAA,QAAA,WACA,EAAA,QAAA,YACA,EAAA,QAAA,WACA,EAAA,QAAA,aA4BC,SAAA,IAAA,GAAA,mBAAA,QAAA,OAAA,KAAA,IAAA,EAAA,IAAA,QAAA,OAAA,EAAA,WAAA,OAAA,GAAA,EAAA,SAAA,EAAA,GAAA,GAAA,GAAA,EAAA,WAAA,OAAA,EAAA,GAAA,OAAA,GAAA,iBAAA,GAAA,mBAAA,EAAA,MAAA,CAAA,QAAA,GAAA,IAAA,EAAA,IAAA,GAAA,GAAA,EAAA,IAAA,GAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,OAAA,gBAAA,OAAA,yBAAA,IAAA,IAAA,KAAA,EAAA,GAAA,OAAA,UAAA,eAAA,KAAA,EAAA,GAAA,CAAA,IAAA,EAAA,EAAA,OAAA,yBAAA,EAAA,GAAA,KAAA,IAAA,EAAA,KAAA,EAAA,KAAA,OAAA,eAAA,EAAA,EAAA,GAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EAAA,QAAA,EAAA,GAAA,EAAA,IAAA,EAAA,GAAA,EA1BM,SAAS6G,IACJhG,SAASC,uBAAuB,gBAAgB,GACtDqB,iBAAiB,QAAS,WACxBuB,EAAIrD,gBACJqD,EAAIhD,0BACJ,EAAA,EAAA,gCACA,EAAA,EAAA,oBACA,EAAA,EAAA,6BACA,EAAA,EAAA,8BACA,EAAA,EAAA,4BACIgD,EAAIjD,cACJ,EAAA,EAAA,0BAEA,EAAA,EAAA,6BAEL,GAIA,SAASqG,IACJjG,SAASC,uBAAuB,iBAAiB,GACvDqB,iBAAiB,QAAS,YACxB,EAAA,EAAA,aACA,EAAA,EAAA,oBACA,EAAA,EAAA,8BACD;;AClCP,aAEA,IAAA,EAAA,QAAA,gBACA,EAAA,QAAA,cACA,EAAA,QAAA,cAEA,EAAA,QAAA,kBAEA,SAAS4E,KACM,EAAA,EAAA,aAAA,EAAX,EAAA,qBACA,EAAA,EAAA,gDACA,EAAA,EAAA,2CAEA,EAAA,EAAA,wCACA,EAAA,EAAA,oCACA,EAAA,EAAA,+CACA,EAAA,EAAA,0CACA,EAAA,EAAA,wCAEA,EAAA,EAAA,mBAGJA","file":"main.bba86566.js","sourceRoot":"..\\src","sourcesContent":["//Global variable\r\n\r\nconst defaulPopulation = {\r\n    farmers : 60,\r\n    criminals : 20,\r\n    prisoners : 0,\r\n    scientists : 0,\r\n    soldiers : 0\r\n}\r\n\r\nconst defaultFoodGain = {\r\n    farmer: 20\r\n}\r\n\r\nconst defaultFoodCost = {\r\n    farmer: 10,\r\n    criminal: 20,\r\n    prisoner: 10,\r\n    scientist: 10,\r\n    soldier: 15\r\n}\r\n\r\nconst defaultOther = {\r\n    food: 2000,\r\n    day: 1,\r\n    tf: 1,\r\n    policyCount: 0,\r\n    researchCount: 0\r\n}\r\n\r\n\r\nexport var population = {\r\n    farmers : 60,\r\n    criminals : 20,\r\n    prisoners : 0,\r\n    scientists : 0,\r\n    soldiers : 0\r\n}\r\n\r\nexport var foodGain = {\r\n    farmer: 20\r\n}\r\n\r\nexport var foodCost = {\r\n    farmer: 10,\r\n    criminal: 20,\r\n    prisoner: 10,\r\n    scientist: 10,\r\n    soldier: 15\r\n}\r\n\r\nexport var other = {\r\n    food: 2000,\r\n    day: 1,\r\n    tf: 1,\r\n    policyCount: 0,\r\n    researchCount: 0\r\n}\r\n\r\nexport function resetAll() {\r\n    population.criminals = defaulPopulation.criminals;\r\n    population.farmers = defaulPopulation.farmers;\r\n    population.prisoners = defaulPopulation.prisoners;\r\n    population.scientists = defaulPopulation.scientists;\r\n    population.soldiers = defaulPopulation.soldiers;\r\n\r\n    foodGain.farmer = defaultFoodGain.farmer;\r\n\r\n    foodCost.criminals = defaultFoodCost.criminals;\r\n    foodCost.farmers = defaultFoodCost.farmers;\r\n    foodCost.prisoners = defaultFoodCost.prisoners;\r\n    foodCost.scientists = defaultFoodCost.scientists;\r\n    foodCost.soldiers = defaultFoodCost.soldiers;\r\n\r\n    other.policyCount = defaultOther.policyCount;\r\n    other.researchCount = defaultOther.researchCount;\r\n    other.day = defaultOther.day;\r\n    other.food = defaultOther.food;\r\n    other.tf = defaultOther.tf;\r\n}\r\n\r\nexport function resetPolicyAndResearchCount() {\r\n    other.policyCount = defaultOther.policyCount;\r\n    other.researchCount = defaultOther.researchCount;\r\n}","import { population, foodGain, foodCost, other } from './varibale';\r\n\r\n//  get food produced by farmers\r\nexport function getFarmersFoodGain(){\r\n    return foodGain.farmer * other.tf * population.farmers;\r\n}\r\n\r\n// get food consumed by farmers\r\nexport function getFarmersFoodCost() {\r\n    return -1 * population.farmers * (foodCost.farmer + 2 * (other.day - 1));\r\n}\r\n\r\n// get food consumed by criminals\r\nexport function getCriminalsFoodCost(){\r\n    return -1 * population.criminals * (foodCost.criminal + 2 * (other.day - 1));\r\n}\r\n\r\n// get food consumed by prisoners\r\nexport function getPrisonersFoodCost() {\r\n    return -1 * population.prisoners * (foodCost.prisoner + 2 * (other.day - 1));\r\n}\r\n\r\n// get food consumed by scientists\r\nexport function getScientistsFoodCost(){\r\n    return -1 * population.scientists * (foodCost.prisoner + 2 * (other.day - 1));\r\n}\r\n\r\n// get food consumed by soldiers\r\nexport function getSoldiersFoodCost(){\r\n    return -1 * population.soldiers * (foodCost.soldier + 2 * (other.day - 1));\r\n}\r\n\r\n// tf gained from waterResearch, tf += 0.5 - 0.8 with 0.2 * mdrf\r\nexport function waterResearch(){\r\n    let possibility1 = [0.5, 0.55, 0.7, 0.75];\r\n    let successrate = (0.3 * population.scientists - 0.006 * (population.scientists)^2) * 0.2; \r\n    other.tf += (successrate > 1) ? possibility1[Math.floor(Math.random() * 10) % possibility3.length] : 0;\r\n    other.researchCount += 1;\r\n}\r\n\r\n// tf gained from landResearch, tf += 0.3 - 0.5 with 0.4 * mdrf\r\nexport function landResearch(){\r\n    let possibility2 = [0.25, 0.4, 0.5];\r\n    let successrate = (0.3 * population.scientists - 0.006*(population.scientists)^2) * 0.34; \r\n    other.tf += (successrate > 1) ? possibility2[Math.floor(Math.random() * 10) % possibility2.length] : 0;\r\n    other.researchCount += 1;\r\n}\r\n\r\n// tf gained from cropResearch, tf += 0.2 - 0.3 with 0.6 * mdrf\r\nexport function cropResearch(){\r\n    let possibility3 = [0.2, 0.25];\r\n    let successrate = (0.3 * population.scientists - 0.006 * (population.scientists)^2) * 0.6; \r\n    other.tf += (successrate > 1) ? possibility3[Math.floor(Math.random() * 10) % possibility3.length] : 0;\r\n    other.researchCount += 1;\r\n}\r\n\r\nexport function canResearch() {\r\n    return other.researchCount == 0;\r\n}\r\n\r\nexport function canEnforcePolicy() {\r\n    return other.policyCount == 0;\r\n}\r\n\r\nexport function eduPromotion() {\r\n    var diff = Math.floor(population.farmers * 0.1);\r\n    population.farmers -= diff;\r\n    population.scientists += diff;\r\n    other.policyCount += 1;\r\n}\r\n\r\nexport function scientistRetirement() {\r\n    var diff = Math.floor(population.scientists * 0.1);\r\n    population.scientists -= diff;\r\n    population.farmers += diff;\r\n    other.policyCount += 1;\r\n}\r\n\r\nexport function longHourFarming() {\r\n    foodGain.farmer += 5;\r\n    other.policyCount += 1;\r\n}\r\n\r\nexport function militaryRecruitment() {\r\n    var diff = Math.floor(population.farmers * 0.1);\r\n    population.farmers -= diff;\r\n    population.soldiers += diff;\r\n    other.policyCount += 1;\r\n}\r\n\r\nexport function militaryRetirement() {\r\n    var diff = Math.floor(population.soldiers * 0.1);\r\n    population.soldiers -= diff;\r\n    population.farmers += diff;\r\n    other.policyCount += 1;\r\n}\r\n\r\nexport function catchIfShould() {\r\n    if (other.day % 2 == 0) {\r\n        population.criminals -= 1;\r\n        population.prisoners += 1;\r\n    }\r\n}\r\n\r\nexport function specialEventChangeTechFactor(amount) {\r\n    other.tf += amount;\r\n}\r\n\r\nexport function specialEventChangeCropProduction(amount) {\r\n    foodGain.farmer += amount;\r\n}\r\n\r\nexport function isGameOver(){\r\n    return other.food <= 0;\r\n}\r\n\r\nexport function naturalUpdateVariables() {\r\n    other.food = other.food + getFarmersFoodGain() + getFarmersFoodCost() + getCriminalsFoodCost() + getPrisonersFoodCost() + getSoldiersFoodCost() + getScientistsFoodCost();\r\n    other.day++;\r\n}","export function addEventCardTransition() {\r\n    var e = document.getElementsByClassName(\"event-card\")[0];\r\n    if (!e.classList.contains(\"event-card-show\"))\r\n        e.classList.add(\"event-card-show\");\r\n}\r\n\r\nexport function removeEventCardTransition() {\r\n    var e = document.getElementsByClassName(\"event-card\")[0];\r\n    if (e.classList.contains(\"event-card-show\"))\r\n        e.classList.remove(\"event-card-show\");\r\n}\r\n\r\nexport function addInfoCardTransition() {\r\n    var e = document.getElementsByClassName(\"info-card\")[0];\r\n    if (!e.classList.contains(\"info-card-show\"))\r\n        e.classList.add(\"info-card-show\");\r\n}\r\n\r\nexport function removeInfoCardTransition() {\r\n    var e = document.getElementsByClassName(\"info-card\")[0];\r\n    if (e.classList.contains(\"info-card-show\"))\r\n        e.classList.remove(\"info-card-show\");\r\n}\r\n\r\nexport function addPanelTriggerButtonTransition() {\r\n    var e = document.getElementsByClassName(\"panel-trigger-btn\")[0];\r\n    if (!e.classList.contains(\"panel-trigger-btn-follow\"))\r\n        e.classList.add(\"panel-trigger-btn-follow\");\r\n}\r\n\r\nexport function removePanelTriggerButtonTransition() {\r\n    var e = document.getElementsByClassName(\"panel-trigger-btn\")[0];\r\n    if (e.classList.contains(\"panel-trigger-btn-follow\"))\r\n        e.classList.remove(\"panel-trigger-btn-follow\");\r\n}\r\n\r\nexport function addPanelTransition() {\r\n    var e = document.getElementsByClassName(\"panel\")[0];\r\n    if (!e.classList.contains(\"panel-show\"))\r\n        e.classList.add(\"panel-show\");\r\n}\r\n\r\nexport function removePanelTransition() {\r\n    var e = document.getElementsByClassName(\"panel\")[0];\r\n    if (e.classList.contains(\"panel-show\"))\r\n        e.classList.remove(\"panel-show\");\r\n}\r\n\r\nexport function addGameOverTransition() {\r\n    var e = document.getElementsByClassName(\"game-over\")[0];\r\n    if (!e.classList.contains(\"game-over-show\"))\r\n        e.classList.add(\"game-over-show\");\r\n}\r\n\r\nexport function removeGameOverTransition() {\r\n    var e = document.getElementsByClassName(\"game-over\")[0];\r\n    if (e.classList.contains(\"game-over-show\"))\r\n        e.classList.remove(\"game-over-show\");\r\n}\r\n\r\nexport function addControlButtonTransition(type) {\r\n    var es = document.getElementsByClassName(type);\r\n    for (var i = 0; i < es.length; i++) {\r\n        if (!es[i].classList.contains(\"ctbn-button-disabled\"))\r\n            es[i].classList.add(\"ctbn-button-disabled\");\r\n    }\r\n}\r\n\r\nexport function removeControlButtonTransition(type) {\r\n    var es = document.getElementsByClassName(type);\r\n    for (var i = 0; i < es.length; i++) {\r\n        if (es[i].classList.contains(\"ctbn-button-disabled\"))\r\n            es[i].classList.remove(\"ctbn-button-disabled\");\r\n    }\r\n}","'use strict'\r\n\r\nimport { addPanelTransition, removePanelTransition, addPanelTriggerButtonTransition, removePanelTriggerButtonTransition } from './effect'\r\nimport { population, other } from './varibale';\r\nimport * as cal from './calFunction';\r\n\r\nexport function registerClickListenerForPanelTriggerButton() {\r\n    var btn = document.getElementsByClassName(\"panel-trigger-btn\")[0];\r\n    btn.addEventListener(\"click\", () => {\r\n        updatePanelData();\r\n        if (btn.innerText === \"Statistics\") {\r\n            btn.innerText = \"Close\";\r\n            addPanelTriggerButtonTransition();\r\n            addPanelTransition();\r\n        } else {\r\n            btn.innerText = \"Statistics\";\r\n            removePanelTriggerButtonTransition();\r\n            removePanelTransition();\r\n        }\r\n    }, false);\r\n}\r\n\r\nfunction parseString(str) {\r\n    var number = Number.parseInt(str, 10);\r\n    if (isNaN(number)) {\r\n        number = Number.parseInt(str.substring(1, str.length - 1).replace(\"+\", \"\"), 10);\r\n    }\r\n    return isNaN(number) ? 0 : number;\r\n}\r\n\r\nfunction representAsString(num) {\r\n    return num >= 0 ? \"+\" + num : num;\r\n}\r\n\r\nfunction isNegativeNumber(str) {\r\n    return parseString(str) < 0;\r\n}\r\n\r\nfunction updatePanelDataColor() {\r\n    var data = document.getElementsByClassName(\"delta\");\r\n    for (var i = 0; i < data.length; i++) {\r\n        data[i].style.color = isNegativeNumber(data[i].innerText) ? \"red\" : \"green\";\r\n    }\r\n}\r\n\r\nexport function updatePanelData() {\r\n    var var1 = document.getElementsByClassName(\"farmer-pop-data\")[0];\r\n    var1.innerText = population.farmers;\r\n    var var2 = document.getElementsByClassName(\"farmer-pop-change-data\")[0];\r\n    var2.innerText = \"[\" + representAsString(population.farmers - parseString(var1.innerText)) + \"]\";\r\n\r\n    var var3 = document.getElementsByClassName(\"criminal-pop-data\")[0];\r\n    var3.innerText = population.criminals;\r\n    var var4 = document.getElementsByClassName(\"criminal-pop-change-data\")[0];\r\n    var4.innerText = \"[\" + representAsString(population.criminals - parseString(var3.innerText)) + \"]\";\r\n\r\n    var var5 = document.getElementsByClassName(\"prisoner-pop-data\")[0];\r\n    var5.innerText = population.prisoners;\r\n    var var6 = document.getElementsByClassName(\"prisoner-pop-change-data\")[0];\r\n    var6.innerText = \"[\" + representAsString(population.prisoners - parseString(var5.innerText)) + \"]\";\r\n\r\n    var var7 = document.getElementsByClassName(\"soldier-pop-data\")[0];\r\n    var7.innerText = population.soldiers;\r\n    var var8 = document.getElementsByClassName(\"soldier-pop-change-data\")[0];\r\n    var8.innerText = \"[\" + representAsString(population.soldiers - parseString(var7.innerText)) + \"]\";\r\n\r\n    var var9 = document.getElementsByClassName(\"scientist-pop-data\")[0];\r\n    var9.innerText = population.scientists;\r\n    var var10 = document.getElementsByClassName(\"scientist-pop-change-data\")[0];\r\n    var10.innerText = \"[\" + representAsString(population.scientists - parseString(var9.innerText)) + \"]\";\r\n\r\n\r\n\r\n    var var101 = document.getElementsByClassName(\"food-data\")[0];\r\n    var101.innerText = other.food;\r\n\r\n    var var102 = document.getElementsByClassName(\"tech-fc\")[0];\r\n    var102.innerText = other.tf;\r\n\r\n    var var11 = document.getElementsByClassName(\"survival-day-data\")[0];\r\n    var11.innerText = other.day;\r\n\r\n\r\n\r\n    var var111 = document.getElementsByClassName(\"farmer-food-gain-data\")[0];\r\n    var111.innerText = \"[\" + representAsString(cal.getFarmersFoodGain()) + \"]\";\r\n\r\n    var var12 = document.getElementsByClassName(\"farmer-food-cost-data\")[0];\r\n    var12.innerText = \"[\" + representAsString(cal.getFarmersFoodCost()) + \"]\";\r\n\r\n    var var13 = document.getElementsByClassName(\"criminal-food-change-data\")[0];\r\n    var13.innerText = \"[\" + representAsString(cal.getCriminalsFoodCost()) + \"]\";\r\n\r\n    var var14 = document.getElementsByClassName(\"prisoner-food-change-data\")[0];\r\n    var14.innerText = \"[\" + representAsString(cal.getPrisonersFoodCost()) + \"]\";\r\n\r\n    var var15 = document.getElementsByClassName(\"soldier-food-change-data\")[0];\r\n    var15.innerText = \"[\" + representAsString(cal.getSoldiersFoodCost()) + \"]\";\r\n\r\n    var var16 = document.getElementsByClassName(\"scientist-food-change-data\")[0];\r\n    var16.innerText = \"[\" + representAsString(cal.getScientistsFoodCost()) + \"]\";\r\n\r\n    updatePanelDataColor();\r\n}","import { canEnforcePolicy, canResearch, cropResearch, eduPromotion, landResearch, longHourFarming, militaryRecruitment, militaryRetirement, scientistRetirement, waterResearch } from \"./calFunction\";\r\nimport { addControlButtonTransition, addInfoCardTransition, removeControlButtonTransition, removeInfoCardTransition } from \"./effect\";\r\nimport { updatePanelData } from \"./panel\";\r\n\r\nconst OPTIONS = {\r\n    policies: {\r\n        count: 5,\r\n        options: [\"Education Promotion\", \"Long-hour Farming\", \"Military Recruitment\", \"Military Retirement\", \"Scientist Retirement\"]\r\n    },\r\n    research: {\r\n        count: 3,\r\n        options: [\"Water\", \"Land\", \"Crops\"]\r\n    }\r\n}\r\n\r\nconst BUTTON_INFO = [\r\n    // Policies\r\n    {\r\n        name: \"Education Promotion\",\r\n        desc: \"Promotes education among farmers and transform them to scientists.\"\r\n    },\r\n    {\r\n        name: \"Long-hour Farming\",\r\n        desc: \"Enforces farmers to work for extra hours to harvest more crops.\"\r\n    },\r\n    {\r\n        name: \"Military Recruitment\",\r\n        desc: \"Recruits more soldiers among farmers.\"\r\n    },\r\n    {\r\n        name: \"Military Retirement\",\r\n        desc: \"Asks some soldiers to retire, so they turn back to farmers.\"\r\n    },\r\n    {\r\n        name: \"Scientist Retirement\",\r\n        desc: \"Asks some scientists to retire, so they turn back to farmers.\"\r\n    },\r\n\r\n    // Research\r\n    {\r\n        name: \"Water\",\r\n        desc: \"Asks scientists to study how to improve water quality.\"\r\n    },\r\n    {\r\n        name: \"Land\",\r\n        desc: \"Asks scientists to study how to improve land quality.\"\r\n    },\r\n    {\r\n        name: \"Crops\",\r\n        desc: \"Asks scientists to study how to increase crop production.\"\r\n    },\r\n]\r\n\r\nfunction getOption(str) {\r\n    return str === \"Policies\" ? OPTIONS.policies : OPTIONS.research;\r\n\r\n}\r\n\r\nexport function setButtons(option) {\r\n    var buttons = document.getElementsByClassName(\"buttons\")[0];\r\n    buttons.innerHTML = \"\"; // clear \r\n    for (var i = 0; i < option.count; i++) {\r\n        var node = document.createElement(\"div\");\r\n        node.innerText = option.options[i];\r\n        node.className = \"cbtn \" + (OPTIONS.policies.options.includes(option.options[i]) ? \"Policies\" : \"Research\");\r\n        buttons.appendChild(node);\r\n    }\r\n}\r\n\r\nexport function getActiveOption() {\r\n    var opts = document.getElementsByClassName(\"opt\");\r\n    for (var i = 0; i < opts.length; i++) {\r\n        if (opts[i].classList.contains(\"active\"))\r\n            return getOption(opts[i].innerText);\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function getControlButtonInfo(btn) {\r\n    for (var i = 0; i < BUTTON_INFO.length; i++) {\r\n        if (btn.innerText === BUTTON_INFO[i].name)\r\n            return BUTTON_INFO[i];\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function fillControlButtonInfo(info) {\r\n    document.getElementsByClassName(\"info-name\")[0].innerText = info.name;\r\n    document.getElementsByClassName(\"info-desc\")[0].innerText = info.desc;\r\n}\r\n\r\nexport function registerClickListenerForOptions() {\r\n    var opts = document.getElementsByClassName(\"opt\");\r\n    for (var i = 0; i < opts.length; i++) {\r\n        opts[i].addEventListener(\"click\", e => {\r\n            var opts = document.getElementsByClassName(\"opt\");\r\n            for (var i = 0; i < opts.length; i++) {\r\n                opts[i].className = \"opt\"\r\n            }\r\n            e.currentTarget.className = \"opt active \";\r\n    \r\n            // set buttons\r\n            setButtons(getActiveOption())\r\n\r\n            // register listeners for newly added buttons\r\n            registerMouseEnterListenerForControlButtons();\r\n            registerClickListenerForControlButtons();\r\n\r\n            updateControlButtonStyle();\r\n        }, false);\r\n    }\r\n}\r\n\r\nexport function registerMouseEnterListenerForControlButtons() {\r\n    var cbtns = document.getElementsByClassName(\"cbtn\");\r\n    for (var i = 0; i < cbtns.length; i++) {\r\n        cbtns[i].addEventListener(\"mouseenter\", e => {\r\n            fillControlButtonInfo(getControlButtonInfo(e.currentTarget));\r\n            addInfoCardTransition();\r\n        }, false);\r\n        \r\n        cbtns[i].addEventListener(\"mouseleave\", e => {\r\n            removeInfoCardTransition();\r\n        }, false)\r\n    }\r\n}\r\n\r\nexport function updateControlButtonStyle() {\r\n    if (!canResearch()) {\r\n        addControlButtonTransition(\"Research\");\r\n    } else {\r\n        removeControlButtonTransition(\"Research\");\r\n    }\r\n\r\n    if (!canEnforcePolicy()) {\r\n        addControlButtonTransition(\"Policies\");\r\n    } else {\r\n        removeControlButtonTransition(\"Policies\");\r\n    }\r\n}\r\n\r\nexport function registerClickListenerForControlButtons() {\r\n    var cbtns = document.getElementsByClassName(\"cbtn\");\r\n    for (var i = 0; i < cbtns.length; i++) {\r\n        cbtns[i].addEventListener(\"click\", e => {\r\n            var ele = e.currentTarget;\r\n            \r\n            if (canResearch() && ele.classList.contains(\"Research\")) {\r\n                switch (ele.innerText) {\r\n                    case \"Water\":\r\n                        waterResearch();\r\n                        break;\r\n                    case \"Land\":\r\n                        landResearch();\r\n                        break;\r\n                    case \"Crops\":\r\n                        cropResearch();\r\n                        break;\r\n                    default:\r\n                        console.log(\"Unknown research.\");\r\n                        break;\r\n                }\r\n            }\r\n            \r\n            if (canEnforcePolicy() && ele.classList.contains(\"Policies\")) {\r\n                switch (ele.innerText) {\r\n                    case \"Education Promotion\":\r\n                        eduPromotion();\r\n                        break;\r\n                    case \"Long-hour Farming\":\r\n                        longHourFarming();\r\n                        break;\r\n                    case \"Military Recruitment\":\r\n                        militaryRecruitment();\r\n                        break;\r\n                    case \"Military Retirement\":\r\n                        militaryRetirement();\r\n                        break;\r\n                    case \"Scientist Retirement\":\r\n                        scientistRetirement();\r\n                        break;\r\n                    default:\r\n                        console.log(\"Unknown policy.\");\r\n                        break;\r\n                }\r\n            }\r\n\r\n            updatePanelData();\r\n            updateControlButtonStyle();\r\n        }, false);\r\n    }\r\n}","import { specialEventChangeCropProduction, specialEventChangeTechFactor } from \"./calFunction\";\r\nimport { addEventCardTransition, removeEventCardTransition } from \"./effect\"\r\nimport { updatePanelData } from \"./panel\";\r\n\r\nconst SUBJECTS = [\"Fuel Leakage\", \"Gifts From Future\", \"Farmer Riots\"]\r\n\r\nconst ACTIONS = [\r\n    {\r\n        type: \"Increased\", \r\n        desc: [\r\n            \"How cyberpunk! The water nearby was improved after absorbing the fuel!\",\r\n            \"Amazing! A high-tech machine from future was found by a farmer yesterday in the farm largely increasing the standard of living!\",\r\n            \"What? Farmers started a riot yesterday but ended up improving our life!\"\r\n        ],\r\n        effect: [\r\n            [5, 0.1],\r\n            [8, 0.3],\r\n            [3, 0.1]\r\n        ]\r\n    },\r\n    {\r\n        type: \"Decreased\",\r\n        desc: [\r\n            \"Alert! The only water body nearby was contaminated last night due to the leakage of fuels in famers' bionic arms!\",\r\n            \"Unfortunate! A scrapped machine was misused by farmers as a high-tech reducing the standard of living!\",\r\n            \"Such a tragedy! Farmers started a riot yesterday! They damaged everything!\"\r\n        ],\r\n        effect: [\r\n            [-5, -0.1],\r\n            [-8, -0.3],\r\n            [-3, -0.1]\r\n        ]\r\n    }\r\n]\r\n\r\nconst TARGETS = [\"Crop Production\", \"Technology Level\"]\r\n\r\nfunction generateEvent() {\r\n    var subjectIndex = Math.floor((Math.random() * 10) % SUBJECTS.length);\r\n    var actionIndex = Math.floor((Math.random() * 10) % ACTIONS.length);\r\n    var targetIndex = Math.floor((Math.random() * 10) % TARGETS.length);\r\n\r\n    return {\r\n        subject: SUBJECTS[subjectIndex],\r\n        action: ACTIONS[actionIndex].type,\r\n        desc: ACTIONS[actionIndex].desc[subjectIndex],\r\n        effect: ACTIONS[actionIndex].effect[subjectIndex][targetIndex],\r\n        target: TARGETS[targetIndex]\r\n    }\r\n}\r\n\r\nfunction fillEventText(option) {\r\n    document.getElementsByClassName(\"subject\")[0].innerText = option.subject;\r\n    document.getElementsByClassName(\"desc\")[0].innerText = option.desc;\r\n    document.getElementsByClassName(\"result\")[0].innerText = (option.target + \" \" + option.action + \" by \" + option.effect + \".\").replace(\"-\", \"\");\r\n}\r\n\r\nexport function randomGenerateEventCard() {\r\n    var res = Math.floor(Math.random() * 10);\r\n    if (res === 1 || res === 2) {\r\n        fillEventText(generateEvent());\r\n        addEventCardTransition();\r\n    }\r\n}\r\n\r\nexport function registerClickListenerForEventButton() {\r\n    var ebtn = document.getElementsByClassName(\"event-btn\")[0];\r\n    ebtn.addEventListener(\"click\", () => {\r\n        var strGroup = document.getElementsByClassName(\"result\")[0].innerText.split(\" \");\r\n        var diff = Number.parseFloat(strGroup[strGroup.length - 1]);\r\n        diff = strGroup[strGroup.length - 2] === \"Increased\" ? diff : -diff;\r\n        if ((diff > 0 && diff < 1) || (diff < 0 && diff > -1)) { // tech level\r\n            specialEventChangeTechFactor(diff);\r\n        } else { // crop production\r\n            specialEventChangeCropProduction(diff);\r\n        }\r\n        removeEventCardTransition();\r\n        updatePanelData();\r\n    }, false);\r\n}","'use strict'\r\n\r\nimport { resetAll, resetPolicyAndResearchCount } from './varibale'\r\nimport * as cal from './calFunction';\r\nimport { updatePanelData } from './panel';\r\nimport { addGameOverTransition, removeEventCardTransition, removeGameOverTransition, removeInfoCardTransition, removePanelTransition, removePanelTriggerButtonTransition } from './effect'\r\nimport { randomGenerateEventCard } from './event';\r\nimport { updateControlButtonStyle } from './control';\r\n\r\nexport function registerClickListenerForNextDayButton() {\r\n    var e = document.getElementsByClassName(\"next-day-btn\")[0];\r\n    e.addEventListener(\"click\", () => {\r\n        cal.catchIfShould();\r\n        cal.naturalUpdateVariables();\r\n        resetPolicyAndResearchCount();\r\n        updatePanelData();\r\n        updateControlButtonStyle();\r\n        removeEventCardTransition();\r\n        removeInfoCardTransition();\r\n        if (cal.isGameOver()) {\r\n            addGameOverTransition();\r\n        } else {\r\n            randomGenerateEventCard();\r\n        }\r\n    }, false);\r\n}\r\n\r\n\r\nexport function registerClickListenerForGameRestart() {\r\n    var e = document.getElementsByClassName(\"game-over-btn\")[0];\r\n    e.addEventListener(\"click\", () => {\r\n        resetAll();\r\n        updatePanelData();\r\n        removeGameOverTransition();\r\n    }, false);\r\n}","'use strict';\r\n\r\nimport { getActiveOption, registerClickListenerForOptions, registerMouseEnterListenerForControlButtons, registerClickListenerForControlButtons, setButtons } from \"./js/control\";\r\nimport { registerClickListenerForEventButton } from './js/event';\r\nimport { updatePanelData } from './js/panel';\r\nimport { registerClickListenerForPanelTriggerButton } from './js/panel';\r\nimport { registerClickListenerForNextDayButton, registerClickListenerForGameRestart } from './js/lifecycle';\r\n\r\nfunction setup() {\r\n    setButtons(getActiveOption());\r\n    registerMouseEnterListenerForControlButtons();\r\n    registerClickListenerForControlButtons();\r\n\r\n    registerClickListenerForEventButton();\r\n    registerClickListenerForOptions();\r\n    registerClickListenerForPanelTriggerButton();\r\n    registerClickListenerForNextDayButton();\r\n    registerClickListenerForGameRestart();\r\n\r\n    updatePanelData();\r\n}\r\n\r\nsetup();"]}